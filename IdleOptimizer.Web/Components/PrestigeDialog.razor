@using IdleOptimizer.Components
@using MudBlazor
@inherits FormDialogBase

<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">Prestige</MudText>
    </TitleContent>
    <DialogContent>
        <MudAlert Severity="Severity.Warning" Class="mb-4">
            <strong>Warning:</strong> This will reset all progress including generator counts, applied research, and current production/costs. 
            Base values will be multiplied by the specified multipliers.
        </MudAlert>
        <MudForm @ref="Form" @bind-IsValid="@Success" @bind-Errors="@Errors">
            <MudNumericField @bind-Value="@productionMultiplier" 
                           Label="Production Multiplier" 
                           Variant="Variant.Outlined" 
                           Required="true" 
                           Min="0.01" 
                           HelperText="Multiplies BaseResources for all generators" />
            <MudNumericField @bind-Value="@costMultiplier" 
                           Label="Cost Multiplier" 
                           Variant="Variant.Outlined" 
                           Required="true" 
                           Min="0.01" 
                           HelperText="Multiplies BaseResourceCosts for generators and costs for research" 
                           Class="mt-4" />
        </MudForm>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Cancel</MudButton>
        <MudButton Color="Color.Warning" Variant="Variant.Filled" OnClick="SaveAsync" Disabled="!Success">
            Confirm Prestige
        </MudButton>
    </DialogActions>
</MudDialog>

@code {
    private double productionMultiplier = 1.0;
    private double costMultiplier = 1.0;

    protected override async Task OnSaveAsync()
    {
        MudDialog.Close(DialogResult.Ok((productionMultiplier, costMultiplier)));
    }
}